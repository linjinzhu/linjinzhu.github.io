<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>在亚马逊云上使用 Ubuntu 系统实例 | Hexo</title>

  
  <meta name="author" content="John Doe">
  

  
  <meta name="description" content="目录
远程登录
创建账户
安装软件

远程登录在亚马逊云上创建了实例之前，必须创建一个秘钥对，实例上保留公钥，本地下载私钥。实例安装完毕，默认安装了 ssh server，通过 ssh 方式登录时必须指定服务器对应的私钥才能登录。下面是登录亚马逊实例的本地命令：
ssh -i &amp;quot;amazo">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="在亚马逊云上使用 Ubuntu 系统实例"/>

  <meta property="og:site_name" content="Hexo"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Hexo</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>在亚马逊云上使用 Ubuntu 系统实例</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/03/17/在亚马逊云上使用_ubuntu_系统实例/" rel="bookmark">
        <time class="entry-date published" datetime="2016-03-17T08:10:08.000Z">
          2016-03-17
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#远程登录">远程登录</a></li>
<li><a href="#创建账户">创建账户</a></li>
<li><a href="#安装软件">安装软件</a></li>
</ul>
<h2 id="远程登录"><a href="#远程登录" class="headerlink" title="远程登录"></a><span id="远程登录">远程登录</span></h2><p>在亚马逊云上创建了实例之前，必须创建一个秘钥对，实例上保留公钥，本地下载私钥。实例安装完毕，默认安装了 ssh server，通过 ssh 方式登录时必须指定服务器对应的私钥才能登录。下面是登录亚马逊实例的本地命令：</p>
<pre><code>ssh -i &quot;amazon-private.pem&quot; ubuntu@ec2-52-192-155-235.ap-northeast-1.compute.amazonaws.com
</code></pre><h2 id="创建账户"><a href="#创建账户" class="headerlink" title="创建账户"></a><span id="创建账户">创建账户</span></h2><p><strong>设置 root 用户</strong>。Ubuntu 系统安装好之后默认没有 root 账户的密码，第一次启动时需要设置一个 root 密码，使用命令 <code>sudo passwd</code> ，会提示你输入两次新密码，这个密码就是 root 账户密码。使用命令 <code>su root</code> 即可切换到 root 账户下。</p>
<p><strong>创建新用户</strong>。使用 <code>useradd</code> 创建新用户，etc：</p>
<pre><code>useradd -d &quot;/home/wusong&quot; -m -s &quot;/bin/bash&quot; wusong
</code></pre><p><strong>修改用户信息</strong>。使用 <code>usermod</code> 更新用户信息，etc：</p>
<pre><code>usermod wusong -L # 锁定用户
usermod wusong -U # 解锁用户
</code></pre><p><strong>删除用户</strong>。使用 <code>userdel</code> 删除用户，etc：</p>
<pre><code>userdel wusong
</code></pre><p><strong>查看用户信息</strong>。使用 <code>who</code>、<code>whoami</code> 、<code>whois</code>、<code>finger</code>。例如执行 <code>who -a</code> 命令的输出结果为：</p>
<pre><code>root@ip-172-31-19-15:/home/ubuntu# who -a
system boot  Mar 17 09:46
run-level 2  Mar 17 09:46
LOGIN      tty4         Mar 17 09:46              1057 id=4
LOGIN      tty5         Mar 17 09:46              1060 id=5
LOGIN      tty2         Mar 17 09:46              1064 id=2
LOGIN      tty3         Mar 17 09:46              1065 id=3
LOGIN      tty6         Mar 17 09:46              1067 id=6
LOGIN      tty1         Mar 17 09:46              1187 id=1
LOGIN      ttyS0        Mar 17 09:46              1188 id=tyS0
ubuntu   + pts/0        Mar 17 09:47   .          1288 (221.219.105.121)
</code></pre><p><strong>为用户加系统权限</strong>。执行命令</p>
<pre><code>sudo vim /etc/sudoers
</code></pre><p>修改文件如下：</p>
<pre><code># User privilege specification
root ALL=(ALL) ALL
wusong ALL=(ALL) ALL
</code></pre><p>保存退出，wusong 用户就拥有了 root 权限。</p>
<h2 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a><span id="安装软件">安装软件</span></h2><h3 id="在-Ubuntu-中安装-MySQL。"><a href="#在-Ubuntu-中安装-MySQL。" class="headerlink" title="在 Ubuntu 中安装 MySQL。"></a>在 Ubuntu 中安装 MySQL。</h3><pre><code># 安装 mysql 服务器端
$ sudo apt-get install mysql-server
</code></pre><p>安装过程中会提示输入 root 账户的密码，输入两次密码。安装完成之后会自动启动，需要检查 Mysql 程序是否正常启动。</p>
<pre><code># 检查 MySQL 服务器系统进程
$ ps -aux|grep mysql
mysql     2825  0.0  4.9 623920 50420 ?        Ssl  09:55   0:01 /usr/sbin/mysqld
root      3765  0.0  0.0  10436   928 pts/0    S+   11:01   0:00 grep --color=auto mysql

# 检查 MySQL 服务器占用端口
$ netstat -nlt|grep 3306
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN

# 通过启动命令检查 MySQL 服务器状态
$ sudo /etc/init.d/mysql status
* /usr/bin/mysqladmin  Ver 8.42 Distrib 5.5.47, for debian-linux-gnu on x86_64
Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Server version        5.5.47-0ubuntu0.14.04.1
Protocol version    10
Connection        Localhost via UNIX socket
UNIX socket        /var/run/mysqld/mysqld.sock
Uptime:            1 hour 12 min 19 sec

Threads: 1  Questions: 581  Slow queries: 0  Opens: 189  Flush tables: 1  Open tables: 41  Queries per second avg: 0.133

# 通过系统服务命令检查 MySQL 服务器状态
mysql start/running, process 2825
</code></pre><p>修改服务器配置。默认情况下，MySQL的字符集是latin1，因此在存储中文的时候，会出现乱码的情况，所以我们需要把字符集统一改成UTF-8。</p>
<p>用 vim 打开 MySQL 服务器的配置文件 my.cnf</p>
<pre><code>$ sudo vim /etc/mysql/my.cnf
# 在[client]标签下，增加客户端的字符编码
[client]
default-character-set=utf8

# 在[mysqld]标签下，增加服务器端的字符编码
[mysqld]
character-set-server=utf8
collation-server=utf8_general_ci
</code></pre><p>让 MySQL 可以被远程访问。默认情况下，MySQL 服务器不允许远程访问，只允许本机访问，所以我们需要设置打开远程访问的功能。</p>
<pre><code>$ sudo vim /etc/mysql/my.cnf
# 注释掉 bind-address
#bind-address            = 127.0.0.1
</code></pre><p>修改后，重启MySQL服务器。</p>
<pre><code>$ sudo /etc/init.d/mysql restart
* Stopping MySQL database server mysqld                                                                                                                                    [ OK ]
 * Starting MySQL database server mysqld                                                                                                                                    [ OK ]
 * Checking for tables which need an upgrade, are corrupt or were
not closed cleanly.
</code></pre><p>检查修改是否正确。root 用户登录。</p>
<pre><code># 查看数据库字符集编码
$ show variables like &apos;%char%&apos;;
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec)

# 检查 MySQL 服务器占用端口
$ netstat -nlt|grep 3306
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN
</code></pre><p>创建用户，为用户指定可以操作的数据库。</p>
<pre><code># 使用 root 账户登录
$ mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 74
Server version: 5.5.47-0ubuntu0.14.04.1 (Ubuntu)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

# 创建 speedtest 数据库
mysql&gt; create database speedtest;
Query OK, 1 row affected (0.00 sec)

mysql&gt; use speedtest
Database changed
mysql&gt; create table speedtest(id int,name varchar(16) not null);
Query OK, 0 rows affected (0.01 sec)

# 新建 wusong 用户，密码为 wusong，允许 wusong 可以远程访问 speedtest 数据库，授权 wusong 对 speedtest 进行所有数据库操作
mysql&gt; GRANT ALL ON speedtest.* to wusong@&apos;%&apos; IDENTIFIED BY &apos;wusong&apos;;
Query OK, 0 rows affected (0.00 sec)

# 允许 wusong 可以本地访问 speedtest 数据库，授权 wusong 对 speedtest 进行所有数据库操作
mysql&gt; GRANT ALL ON speedtest.* to wusong@localhost IDENTIFIED BY &apos;wusong&apos;;
Query OK, 0 rows affected (0.00 sec)
</code></pre><p>检查配置是否生效。</p>
<pre><code># 使用 wusong 用户登陆
$ mysql -uwusong -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 75
Server version: 5.5.47-0ubuntu0.14.04.1 (Ubuntu)

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| speedtest          |
+--------------------+
2 rows in set (0.00 sec)
</code></pre><p>重启MySQL</p>
<p>更详细的 MySQL 安装和使用信息<a href="http://blog.fens.me/linux-mysql-install/" target="_blank" rel="external">点击这里</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/ubuntu/">ubuntu</a>
    </span>
    

    

    </div>

    
  </div>
</article>

  



    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2016 John Doe
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>